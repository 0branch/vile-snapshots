Changes for vile 7.2 (released ??? ??? ??, 1997)

(tom)	970902 (j)
	+ correct logic in find_mode() that did not find majormode qualifiers
	  for majormodes that began similarly (e.g., "com" masked by "c").
	+ correct an uninitialized variable in per_submode(), found by Purify.
	+ correct ifdef'ing in tcap.c, from 7.1i, when neither tparm nor
	  tparam is found.

(tom)	970901 (i)
	+ if the command-line '@' option is used, set the $startup-file
	  variable to correspond to the startup file which is used.
	+ add tagignorecase mode, which causes tag searches to be done ignoring
	  case (requested by Joseph F. Garvey <garvey@garveys.raleigh.ibm.com>).
	+ initialize last_eolchar in docmd() so that 'set' command works
	  properly in a macro.
	+ add %B substition for error-buffer regular expressions to allow
	  using [Standard Input] and other scratch buffers as error buffers.
	+ modify format-til command to treat '#' specially when in cmode, so
	  no whitespace is inserted after it.
	+ modify format-til command to support comment-prefix mode and handle
	  repeated prefix, so that, for example, vile can now format multiple
	  levels of email replies.
	+ add comment-prefix mode, which specifies a regular expression that
	  controls the portion of a line which is prefixed when formatting.
	+ modify default setting of comments mode to make repeated prefix
	  match (e.g., "> > >", is different from "> >").
	+ ensure that imdying() always exits (reported by Clark Morgan).
	+ workaround for incompatible interpretation of termcap Sf/Sb
	  capability with BSD vs SYSV platforms (tcap.c).

(tom)	970829 (h)
	+ correct initialization of $palstr on OS/2.
	+ correct some of the signed/unsigned warnings from IBM CSet compiler.
	+ remove obsolete autoconf fallback macros.
	+ correct handling of ":abbr res RES", ":abbr wres WRES" combination by
	  forcing matches on these to check that the beginning of the match is
	  an identifier boundary (reported by Paul Laub <P_Laub@fccc.edu>).
	+ correct assignment in maplookup() which caused a -1 returned when no
	  more characters were available for matching to be converted to the
	  0xFF character.
	+ modify fopen-for-write calls on VMS to add "0" argument, which makes
	  the new file get the user's default protection (requested by Brian
	  Reed <bdreed1@lucent.com>).
	+ correct logic that allowed repeated definition of submodes (reported
	  by Duncan Sargeant).
	+ allow submode names to begin with "no", assuming they are booleans
	  (reported by Duncan Sargeant).
	+ corrected lookup of hyphenated submodes, e.g., c-tabstop (reported
	  by Duncan Sargeant <dunc@ucc.gu.uwa.edu.au>).
	+ allow define-submode to accept an '=' between the submode and its
	  value.
	+ modify define-mode and remove-mode to suppress warning message if
	  the mode does not exist, since this produces unnecessary warnings
	  when re-sourcing .vilerc
	+ include <windows.h> only where it is needed, halving the build time
	  (patch by Clark Morgan).
	+ modify configure script to work with CLIX old-style shared libraries
	  (e.g., -lc_s) needed for xvile.

(tom)	970816 (g)
	+ correct type mismatch in filec.c when sizeof(size_t) !=
	  sizeof(unsigned) (reported by Larry Gensch <gensch@zk3.dec.com>).
	+ modify vmsbuild.com to tell MMS (or MMK) to ignore warnings,
	  workaround for an inconsistency between versions of DEC C
	  (suggested by Andy Harper and Adam Denton).
	+ initial implementation of majormodes, which supports grouping of
	  buffer modes, together with qualifiers (e.g., cmode and c-suffixes).
	  New commands include define-mode, define-submode, remove-mode,
	  remove-submode, list-majormodes.  (Most changes are in mktbls.c and
	  modes.c).

(tom)	970619 (f)
	+ modify ":set" command so that it does not force a mode to be set,
	  but instead shows the local buffer and window settings.
	+ correct missing error-test in logic that sets regular-expression
	  modes (reported by Philippe Chassany).
	+ add configure option to specify the total numbered macros available,
	  e.g., execute-macro-1, ifdef'd with OPT_EXEC_MACROS (requested by
	  Philippe Chassany).
	+ modify xvile menus to allow arbitrary command line rather than
	  bound functions (exec.c, menu.c).
	+ correct spurious parameter in vms2unix.c, from 7.1d changes.

(tom)	970607 (e)
	+ modify VMS terminal driver, vmsvt.c, to work when invoked from a
	  command-file, i.e., get terminal characteristics from SYS$COMMAND
	  rather than SYS$INPUT (reported by Adam Denton).
	+ treat '$' as an identifier character on VMS (requested by
	  Adam Denton).
	+ clarify discussion of color in help-file (patch by Clark Morgan).
	+ modify map.c to use TBUFF's, as well as new kbd_reply interface,
	  to remove limit on mapped strings.
	+ change interface/internals of kbd_reply() to use a TBUFF, so we don't
	  need fixed-size buffers any more (bind.c, exec.c, eval.c, history.c,
	  input.c, line.c, modes.c).
	+ correct uninitialized buffer in loadkreg().
	+ correct indexing in display_cursor() function in xvile; exposed when
	  displaying a long list for the historical buffer command.

(tom)	970526 (d)
	+ add $ncolors variable to allow run-time modification of the meaning
	  of colors (e.g., white).
	+ change $palette to a dynamically allocated string.
	+ modify termcap and IBM terminal drivers to support 16 colors.  Note
	  that the termcap driver can do this only when configured against a
	  terminfo library (inspired by a patch from Clark Morgan).
	+ modify mktbls to generate the enumerated choices tables (i.e., for
	  color, visual-matches) to simplify ifdef'ing these between the
	  8-color and 16-color configurations.
	+ undo some of the const parameters of functions, thereby eliminating
	  most of the places where casts were used to remove const.
	+ modify VMS processing of tags to strip file's version number
	  (adapted from fix by Adam Denton <adenton@genre.com>).
	+ modify bclear() to free attributes before removing the buffer's
	  lines, thereby making it faster (patch by Ian Jamison).

(tom)	970513 (c)
	+ set local buffer mode for 'dos' in slowreadf(), which fixes the
	  problem of that function modifying the global mode when piping a file
	  to vile, hence causing syntax errors in vile.rc when it contains
	  trailing carriage-returns (file.c) (analysis by Clark Morgan).
	+ correct missing VASEL flag that caused 'q' command on OS/2 to not
	  display highlighting, missed in 7.0b (os2vio.c) (reported by George
	  Eccles <geccles@ibm.net>)
	+ implement 'flash' for WinNT (ntconio.c)

(tom)	970513 (b)
	+ ifdef'd menu.c to work with 7.1a

(tom)	970512 (a)
	+ modify has_C_suffix() to ignore case on platforms where filename
	  case should be ignored (reported by Emil Rojas <emil@lapel.com>).
	+ add version in vmsbuild.com to release_warnings
	+ remove unnecessary test for Xaw/SimpleMenu.h (configure.in).
	+ improve geometry of Xaw menus using Box (patch by Brendan O'Dea
	  <bod@compusol.com.au>)
	+ add menu.c to the modules for xvile on VMS (reported by Graeme
	  Miller).

Changes for vile 7.1 (released Wed May 8, 1997)

(tom)	970508 (none)
	+ undo a place where I'd dropped an XtVaGetValues() call, since it
	  appeared redundant, but was not - affects only Xaw build (x11.c).
	+ ifdef'd a test in newscreensize() that is applicable only when
	  OPT_WORKING is set; this had broken screen initialization on MS-DOS
	  (display.c).

(tom)	970507 (l)
	+ add resource to control menu-height (x11.c, menu.c).
	+ correct definition in vms2unix.c to allow compile with VAX C, which
	  doesn't like "#define foo xxx.foo".

(tom)	970430 (k)
	+ modify lookup of .vilerc to use startup-file search rules (menu.c)
	+ correct missing XmString conversion (menu.c)
	+ add configure check for -lXext to support Athena build on X11R4.

(tom)	970429 (j)
	+ use im_waiting() function to reset "working..." state after executing
	  a menu-command (menu.c).
	+ modify lookup of .vilemenu to use startup-file search rules.
	+ corrections for porting Xaw version to SunOS, etc., with X11R4 and
	  X11R5 (x11.c, configure.in)

(tom)	970428 (i)
	+ implement Xaw (Athena widget) version of menus.  Simplified buffer
	  lookup function for menus, align/document resource names (menu.c,
	  x11.c, configure script).
	+ correct minor memory leaks during initialization (main.c)
	+ correct array-indexing error that caused core dump when selecting
	  line-wrapped text, moving cursor up (display.c).

(tom)	970422 (h)
	+ improved example of menus for xvile (Philippe Chassany).
	+ correct mistyped index in c-filt.c, which was a char (patch by Ian
	  Jamison).
	+ correct c-filt.c handling of nested comment delimiters (patch by Ian
	  Jamison <ianj@quadrics.com>)
	+ correct sign-extension in tcap.c for xterm mouse-coordinates.

(tom)	970407 (g)
	+ add mode 'tagword', which allows user to lookup the whole word rather
	  than a substring.  (from Adam Denton <adenton@genre.com>).
	+ reintroduce flag 'i_displayed' into 'working' mode (I'd forgotten
	  that it suppressed the message until screen-mode).
	+ improve buffer-switching in menu-support (patch by Philippe Chassany)
	+ correction to MS-DOS, etc., where attempt was made to fclose a file
	  pointer that was out of scope (patch by Clark Morgan).
	+ modify definition of eql_bname() macro so that buffer names are
	  treated as case-insensitive where filenames are, e.g., WinNT and
	  OS/2 (patch by Rick Sladkey from report by Clark Morgan).
	+ add predefined regular expression to finderr.c to improve support
	  for MS-DOS pathnames (patch by Clark Morgan).

(tom)	970407 (f)
	+ integrated menu-support for Motif xvile (patch by Philippe Chassany
	  <phil@cln46ks.der.edf.fr>).
	+ refined changes to 'working' mode to ensure that the "working..."
	  message is cleared when the timer elapses.

(kev)	970407 (e)
	+ fileio.c (isready_c): Small tweak to the ifdefs for mklinux w/
	  shared libraries.  This'll probably be needed for other systems
	  with the up and coming GNU libc as well.

(tom)	970330 (d)
	+ correct missing ']' on generated buffer name for shell output, e.g.,
	  "[!ls]" rather than "[!ls" (reported by Paul Fox): (file.c).
	+ correct unnecessary escaping of '!' in prompts that are not expanding
	  the shell contents (reported by Paul Fox): (input.c).
	+ modify semaphore used by 'working' mode to make the SIGALRM timer
	  elapse when it is not in use, allowing idle process to swap out
	  properly (reported by Bill Kipp): (display.c, etc).
	+ correct filename parsing for MS-DOS/etc configuration by checking
	  for device name (patch by Clark Morgan).

(tom)	970322 (c)
	+ fixes for piping to vile in WinNT (patch by Clark Morgan).
	+ add logic for visual-matches in color, WinNT (patch by Clark Morgan).
	+ add vile-c-filt.exe to makefile.wnt, modify default keyword file
	  on that system to vile.keywords (patch by Clark Morgan).
	+ correct problem with MS-DOS/Win95/NT version of npopen.c that left
	  temp-files after reading from pipe, because file-remove was done
	  before closing (patch by Clark Morgan).

(tom)	970315 (b)
	+ use macro GCC_UNUSED throughout to quiet gcc warnings about unused
	  (dummy) parameters.
	+ modify configure script to use VC_GCC_WARNINGS
	+ add mode to control whether formatting adds one or two spaces
	  after sentences (patch by Otto Lind).
	+ handle C++ comments (patch by Otto Lind <otto.lind@softwire.com>).
	+ implement colored attributes in OS/2 video driver (os2vio.c)
	+ modify writereg() so that it recomputes the region size after
	  invoking the $write-hook; this is necessary since it may change the
	  file's size (reported by Bob Wall <wall@vlt.com>).

(tom)	970314 (a)
	+ modify c-filt.c, manfilt.c to simplify compiling w/o auto-configure
	  "config.h".
	+ modify MS-DOS/Win31/WinNT portion of npopen.c to leave input file
	  descriptor alone when reading from pipe, solving a problem with
	  applications hanging under Thompson Toolkit (patch by Clark O. 
	  Morgan <cmorgan@aracnet.com>)
	+ correct inequality changed in 6.2g which is part of right-margin
	  threshold computation (report and fix by William Yuan
	  <yuan@ariel.ucs.unimelb.edu.au>)
	+ corrected definition of $(exec_prefix) in makefile.in (reported by
	  Joachim Schimpf <J.Schimpf@doc.ic.ac.uk>).
	+ apply suggested casts in vms2unix.c to appease DEC C 5.3 (reported
	  by Andy Harper and Graeme Miller).

This change log started on Wednesday Mar 12, 1997.
