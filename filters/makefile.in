# $Header: /users/source/archives/vile.vcs/filters/RCS/makefile.in,v 1.45 1999/04/17 14:47:58 tom Exp $
#

#### Start of system configuration section. ####

VPATH		= @srcdir@

top_srcdir	= @top_srcdir@
srcdir		= @srcdir@

CC		= @CC@
CPP		= @CPP@
LINK		= @LINK_PREFIX@ $(CC) $(CFLAGS)
INSTALL		= @INSTALL@
INSTALL_PROGRAM	= @INSTALL_PROGRAM@
INSTALL_DATA	= @INSTALL_DATA@

EXTRA_CFLAGS	= @EXTRA_CFLAGS@
CFLAGS		= @CFLAGS@ $(EXTRA_CFLAGS)
LIBS		= @LIBS@
LINT		= @LINT@

LEX		= @LEX@
LEXLIB		= @LEXLIB@
LEX_OUTPUT_ROOT	= @LEX_OUTPUT_ROOT@

x		= @PROG_EXT@

SCREEN		= @SCREEN@
TARGET		= @TARGET@$x

prefix		= @prefix@
exec_prefix	= @exec_prefix@

manext		= 1
libdir		= @libdir@
bindir		= @VILE_LIBDIR_PATH@
datadir		= @datadir@/vile
mandir		= @mandir@/man$(manext)

#### End of system configuration section. ####

SHELL		= /bin/sh
RM              = rm -f

QUOTDEFS	= -DVILE_STARTUP_PATH=\"@VILE_STARTUP_PATH@\"
CPPFLAGS	= -I. -I.. -I$(srcdir) -DHAVE_CONFIG_H @CPPFLAGS@

LDFLAGS		= @IMAKE_LOADFLAGS@

INSTALL_DIRS    = $(bindir) $(datadir)

.SUFFIXES: .l .c .i .o

.l.o:
@RULE_CC@
	@ECHO_CC@$(LEX) -t $< > $*.c
	@ECHO_CC@$(CC) -c $(CPPFLAGS) $(CFLAGS) $*.c
	-$(RM) $*.c
.c.i:
@RULE_CC@
	@ECHO_CC@$(CPP) -C $(CPPFLAGS) $(QUOTDEFS) $< >$@
.c.o:
@RULE_CC@
	@ECHO_CC@$(CC) -c $(CPPFLAGS) $(QUOTDEFS) $(CFLAGS) $<

LF_DEPS = filters.o
LF_ARGS = filters.o $(LEXLIB)

CF_DEPS = filters.o
CF_ARGS = filters.o

# filters in "C" are easy to port
C_ALL	= \
	vile-c-filt$x \
	vile-crypt$x \
	vile-manfilt$x \
	vile-pas-filt$x

# filters in lex/flex require state support
LEX_ALL = \
	vile-ada-filt$x \
	vile-awk-filt$x \
	vile-bat-filt$x \
	vile-cweb-filt$x \
	vile-dcl-filt$x \
	vile-diff-filt$x \
	vile-html-filt$x \
	vile-latex-filt$x \
	vile-lex-filt$x \
	vile-mail-filt$x \
	vile-make-filt$x \
	vile-mms-filt$x \
	vile-nr-filt$x \
	vile-perl-filt$x \
	vile-sh-filt$x \
	vile-spell-filt$x \
	vile-sql-filt$x \
	vile-tc-filt$x \
	vile-tcl-filt$x \
	vile-txt-filt$x \
	vile-ti-filt$x \
	vile-vile-filt$x \
	vile-yacc-filt$x

ALL = 	$(C_ALL) @MAKE_LEX@ $(LEX_ALL)

all:	$(ALL)

vile-crypt$x : ecrypt.o
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ ecrypt.o

vile-manfilt$x : manfilt.o
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ manfilt.o

vile-ada-filt$x : ada-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ ada-filt.o $(LF_ARGS)

vile-awk-filt$x : awk-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ awk-filt.o $(LF_ARGS)

vile-bat-filt$x : bat-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ bat-filt.o $(LF_ARGS)

vile-c-filt$x : c-filt.o $(CF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ c-filt.o $(CF_ARGS)

vile-cweb-filt$x : cwebfilt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ cwebfilt.o $(LF_ARGS)

vile-dcl-filt$x : dcl-filt.o $(CF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ dcl-filt.o $(LF_ARGS)

vile-diff-filt$x : difffilt.o $(CF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ difffilt.o $(LF_ARGS)

vile-html-filt$x : htmlfilt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ htmlfilt.o $(LF_ARGS)

vile-latex-filt$x : latexflt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ latexflt.o $(LF_ARGS)

vile-lex-filt$x : lex-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ lex-filt.o $(LF_ARGS)

vile-mail-filt$x : mailfilt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ mailfilt.o $(LF_ARGS)

vile-make-filt$x : makefilt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ makefilt.o $(LF_ARGS)

vile-mms-filt$x : mms-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ mms-filt.o $(LF_ARGS)

vile-nr-filt$x : nr-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ nr-filt.o $(LF_ARGS)

vile-pas-filt$x : pas-filt.o $(CF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ pas-filt.o $(CF_ARGS)

vile-perl-filt$x : perlfilt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ perlfilt.o $(LF_ARGS)

vile-sh-filt$x : sh-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ sh-filt.o $(LF_ARGS)

vile-spell-filt$x : spellflt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ spellflt.o $(LF_ARGS)

vile-sql-filt$x : sql-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ sql-filt.o $(LF_ARGS)

vile-tc-filt$x : tc-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ tc-filt.o $(LF_ARGS)

vile-tcl-filt$x : tcl-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ tcl-filt.o $(LF_ARGS)

vile-txt-filt$x : txt-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ txt-filt.o $(LF_ARGS)

vile-ti-filt$x : ti-filt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ ti-filt.o $(LF_ARGS)

vile-vile-filt$x : vilefilt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ vilefilt.o $(LF_ARGS)

vile-yacc-filt$x : yaccfilt.o $(LF_DEPS)
	@ECHO_LD@$(LINK) $(LDFLAGS) -o $@ yaccfilt.o $(LF_ARGS)

check: $(TARGET)
	@echo Sorry, no batch tests available.

INSTALL_C = \
	$(bindir)/vile-c-filt$x \
	$(bindir)/vile-crypt$x \
	$(bindir)/vile-manfilt$x \
	$(bindir)/vile-pas-filt$x \
	$(datadir)/c.keywords \
	$(datadir)/filters.rc \
	$(datadir)/pas.keywords \
	$(datadir)/vile.keywords

INSTALL_LEX = \
	$(bindir)/vile-ada-filt$x \
	$(bindir)/vile-awk-filt$x \
	$(bindir)/vile-bat-filt$x \
	$(bindir)/vile-dcl-filt$x \
	$(bindir)/vile-diff-filt$x \
	$(bindir)/vile-html-filt$x \
	$(bindir)/vile-latex-filt$x \
	$(bindir)/vile-lex-filt$x \
	$(bindir)/vile-mail-filt$x \
	$(bindir)/vile-make-filt$x \
	$(bindir)/vile-mms-filt$x \
	$(bindir)/vile-nr-filt$x \
	$(bindir)/vile-perl-filt$x \
	$(bindir)/vile-sh-filt$x \
	$(bindir)/vile-spell-filt$x \
	$(bindir)/vile-sql-filt$x \
	$(bindir)/vile-tc-filt$x \
	$(bindir)/vile-tcl-filt$x \
	$(bindir)/vile-txt-filt$x \
	$(bindir)/vile-ti-filt$x \
	$(bindir)/vile-vile-filt$x \
	$(bindir)/vile-yacc-filt$x \
	$(datadir)/ada.keywords \
	$(datadir)/awk.keywords \
	$(datadir)/bat.keywords \
	$(datadir)/csh.keywords \
	$(datadir)/dcl.keywords \
	$(datadir)/diff.keywords \
	$(datadir)/html.keywords \
	$(datadir)/imake.keywords \
	$(datadir)/java.keywords \
	$(datadir)/js.keywords \
	$(datadir)/latex.keywords \
	$(datadir)/lex.keywords \
	$(datadir)/mail.keywords \
	$(datadir)/make.keywords \
	$(datadir)/nr.keywords \
	$(datadir)/perl.keywords \
	$(datadir)/sh.keywords \
	$(datadir)/spell.rc \
	$(datadir)/sql.keywords \
	$(datadir)/tc.keywords \
	$(datadir)/tcl.keywords \
	$(datadir)/ti.keywords \
	$(datadir)/yacc.keywords

INSTALL_FILES = $(INSTALL_C) @MAKE_LEX@ $(INSTALL_LEX)

install: $(INSTALL_DIRS) \
	$(INSTALL_FILES)
	@echo 'Completed installation.'

installdirs: $(INSTALL_DIRS)

uninstall:
	-$(RM) $(INSTALL_FILES)

# defining this target, though technically (i think) correct, causes
#  the make to fail on machines which don't have autoconf, i.e. most of them.
#configure: configure.in aclocal.m4
#	autoconf

config.status: configure
	$(SHELL) ./config.status --recheck

mostlyclean:
	-$(RM) *.[oi] o$(TARGET) $(BUILTSRCS) core *~ *.BAK $(LEX_OUTPUT_ROOT).*

clean: mostlyclean
	-$(RM) $(ALL)

distclean: clean
	-$(RM) makefile config.status config.cache config.log config.h

realclean: distclean
	-$(RM) tags TAGS

lint:
	$(LINT) $(CPPFLAGS) c-filt.c
	$(LINT) $(CPPFLAGS) ecrypt.c
	$(LINT) $(CPPFLAGS) manfilt.c
	$(LINT) $(CPPFLAGS) pas-filt.c

tags:
	ctags *.[chyl]

TAGS:
	etags *.[chyl]

dotags:
	dotags *.[chyl]

# dependency-rules for install/installdirs
$(bindir)/vile-ada-filt$x :	vile-ada-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-awk-filt$x :	vile-awk-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-bat-filt$x :	vile-bat-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-c-filt$x :	vile-c-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-crypt$x :	vile-crypt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-dcl-filt$x :	vile-dcl-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-diff-filt$x :	vile-diff-filt$x	; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-html-filt$x :	vile-html-filt$x	; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-latex-filt$x :	vile-latex-filt$x	; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-lex-filt$x :	vile-lex-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-mail-filt$x :	vile-mail-filt$x	; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-make-filt$x :	vile-make-filt$x	; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-manfilt$x :	vile-manfilt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-mms-filt$x :	vile-mms-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-nr-filt$x :	vile-nr-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-pas-filt$x :	vile-pas-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-perl-filt$x :	vile-perl-filt$x	; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-sh-filt$x :	vile-sh-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-spell-filt$x :	vile-spell-filt$x	; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-sql-filt$x :	vile-sql-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-tc-filt$x :	vile-tc-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-tcl-filt$x :	vile-tcl-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-txt-filt$x :	vile-txt-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-ti-filt$x :	vile-ti-filt$x		; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-vile-filt$x :	vile-vile-filt$x	; $(INSTALL_PROGRAM) $? $@
$(bindir)/vile-yacc-filt$x :	vile-yacc-filt$x	; $(INSTALL_PROGRAM) $? $@

$(datadir)/filters.rc :		$(srcdir)/filters.rc	; $(INSTALL_DATA) $? $@
$(datadir)/spell.rc :		$(srcdir)/spell.rc	; $(INSTALL_DATA) $? $@

# Install one of these for each filter program
$(datadir)/ada.keywords :	$(srcdir)/ada.key	; $(INSTALL_DATA) $? $@
$(datadir)/awk.keywords :	$(srcdir)/awk.key	; $(INSTALL_DATA) $? $@
$(datadir)/bat.keywords :	$(srcdir)/bat.key	; $(INSTALL_DATA) $? $@
$(datadir)/c.keywords :		$(srcdir)/c.key		; $(INSTALL_DATA) $? $@
$(datadir)/csh.keywords :	$(srcdir)/csh.key	; $(INSTALL_DATA) $? $@
$(datadir)/dcl.keywords :	$(srcdir)/dcl.key	; $(INSTALL_DATA) $? $@
$(datadir)/diff.keywords :	$(srcdir)/diff.key	; $(INSTALL_DATA) $? $@
$(datadir)/html.keywords :	$(srcdir)/html.key	; $(INSTALL_DATA) $? $@
$(datadir)/imake.keywords :	$(srcdir)/imake.key	; $(INSTALL_DATA) $? $@
$(datadir)/java.keywords :	$(srcdir)/java.key	; $(INSTALL_DATA) $? $@
$(datadir)/js.keywords :	$(srcdir)/js.key	; $(INSTALL_DATA) $? $@
$(datadir)/latex.keywords :	$(srcdir)/latex.key	; $(INSTALL_DATA) $? $@
$(datadir)/lex.keywords :	$(srcdir)/lex.key	; $(INSTALL_DATA) $? $@
$(datadir)/mail.keywords :	$(srcdir)/mail.key	; $(INSTALL_DATA) $? $@
$(datadir)/make.keywords :	$(srcdir)/make.key	; $(INSTALL_DATA) $? $@
$(datadir)/nr.keywords :	$(srcdir)/nr.key	; $(INSTALL_DATA) $? $@
$(datadir)/pas.keywords :	$(srcdir)/pas.key	; $(INSTALL_DATA) $? $@
$(datadir)/perl.keywords :	$(srcdir)/perl.key	; $(INSTALL_DATA) $? $@
$(datadir)/sh.keywords :	$(srcdir)/sh.key	; $(INSTALL_DATA) $? $@
$(datadir)/sql.keywords :	$(srcdir)/sql.key	; $(INSTALL_DATA) $? $@
$(datadir)/tc.keywords :	$(srcdir)/tc.key	; $(INSTALL_DATA) $? $@
$(datadir)/tcl.keywords :	$(srcdir)/tcl.key	; $(INSTALL_DATA) $? $@
$(datadir)/ti.keywords :	$(srcdir)/ti.key	; $(INSTALL_DATA) $? $@
$(datadir)/vile.keywords :	$(srcdir)/vile.key	; $(INSTALL_DATA) $? $@
$(datadir)/yacc.keywords :	$(srcdir)/yacc.key	; $(INSTALL_DATA) $? $@

$(INSTALL_DIRS):
	$(SHELL) ${top_srcdir}/mkdirs.sh $@

ALWAYS:

